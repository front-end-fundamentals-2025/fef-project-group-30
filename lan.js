// Define translation data in lan.js
const translations = {
    en: {
        // about us
        about: "Loopstyle is a Nordic sustainable platform from Sweden. It was founded in 2025 and is headquartered in Gothenburg, Sweden. We focus on second-hand clothing and furniture, and are committed to integrating classic design with a sustainable lifestyle. The simplicity, nature and elegance of the Nordic style run through our product line. Each item has been carefully selected, reflecting the persistent pursuit of quality and environmental protection.",
        ourVision: "Our Vision",
        vision: "In addition to providing high-quality second-hand goods, Loopstyle also provides a platform for sellers to easily publish and sell second-hand items. Our vision is to promote green consumption culture through recycling and second-hand transactions, and to create an environmentally friendly, fashionable, and Nordic community.",
        ourArchive: "Our Archive",
        archive: "Each item in our archive tells a story of craftsmanship and care, embodying the core principles of Scandinavian design—simplicity, functionality, and elegance. From clothing to furniture, our archive represents the enduring charm of second-hand goods that are thoughtfully preserved and celebrated. Combine aesthetic grace with sustainable living, all while contributing to a greener, more mindful future.",
        // navigation
        women: "Women",
        men: "Men",
        kids: "Kids",
        home: "Home",
        sell: "Sell",
        search: "Search",
        account: "Account",
        cart: "Cart",
        // sign in / register form（assume that in other parts）
        signIn: "SIGN IN",
        creating: "CREATING",
        email: "Email",
        password: "Password",
        firstName: "First name",
        lastName: "Last name",
        forgotPassword: "Forgot your password ?",
        // sell
        listyouritem: "List your items",
        itemphotos: "Item Photos",
        title: "Title",
        category: "Category",
        top: "Top",
        pants: "Pants",
        accessories: "Accessories",
        brand: "Brand",
        condition: "Condition",
        tags: "New with tags",
        likenew: "Like new",
        good: "Good",
        sellprice: "Price",
        saveasdraft: "Save as Draft",
        listitem: "List Item",
        // main content
        videoCaption: "Rediscover timeless pieces with artisanal charm, perfectly crafted for lighter, warmer days.",
        shopNow: "SHOP NOW",
        viewMore: "VIEW MORE",
        newarrivalsforWomen: "New Arrivals for Women",
        womenCollection: "Take inspiration for the season ahead with our new arrivals for women. Each piece is made with the LOOPSTYLE design ethos in mind, focusing on sustainable fabrics, modern cuts, and timeless colors. Update your wardrobe with our latest collection, designed to bring elegance and versatility to your everyday style.",
        newarrivalsforMen: "New Arrivals for Men",
        menCollection: "Elevate your style for the season ahead with our latest collection of man's wear. Discover timeless pieces that seamlessly transition from day to night, ensuring you stay effortlessly sharp in every setting.",
        newarrivalkids: "New Arrivals for Kids",
        kidscollection: "Inspire playful adventures and cozy moments with our latest collection of children's wear. From everyday essentials to special occasion outfits, our new arrivals are crafted to bring comfort, joy, and a touch of charm to your little one's wardrobe.",
        homes: " Redefine your living spaces with our latest collection of eco-conscious furniture. Designed with the planet in mind, each piece is crafted from responsibly sourced, renewable materials, blending modern aesthetics with timeless functionality.",
        // cart
        orderSummary: "Order Summary",
        checkout: "Proceed to checkout",
        delivery: "Delivery",
        price: "Order Price",
        total: "Total",
        receipt: "Receipt",
        tax: "Estimated tax",
        date: "Order Date: 02-14-2025",
        thanks: "Thanks for making a greener choice!",
        receive: "We've received your sytlish order",
        confirm: "You will receive a confirmation email soon",
        // footer
        sweden: "Sweden",
        sustainability: "Sustainability",
        contact: "Contact",
        faqs: "FAQs",
        delivery: "Delivery",
        payment: "Payment",
        privacyPolicy: "Privacy Policy",
        cookieSettings: "Cookie settings",
        aboutUs: "About Us",
        careers: "Careers",
        studentDiscount: "Student Discount",
        ourBlog: "Our Blog",
        press: "Press",
        subscribeTitle: "Enjoy 15% off on your first order",
        subscribeButton: "SUBSCRIBE",
        subscribeSuccess: "Thank you for subscribing!",
        subscribeMessage: "We've sent a confirmation email to you.",
    },
    sv: {
        // swedish translations
        women: "Dam",
        men: "Herr",
        kids: "Barn",
        home: "Hem",
        sell: "Sälj",
        search: "Sök",
        account: "Konto",
        cart: "Varukorg",
        // about us
        about: "Loopstyle är en nordisk hållbar plattform från Sverige. Det grundades 2025 och har sitt huvudkontor i Göteborg, Sverige. Vi fokuserar på begagnade kläder och möbler och är engagerade i att integrera klassisk design med en hållbar livsstil. Enkelheten, naturen och elegansen i den nordiska stilen går igenom vår produktlinje. Varje föremål har valts ut noggrant, vilket återspeglar den ihärdiga strävan efter kvalitet och miljöskydd.",
        ourVision: "Vår Vision",
        vision: "Förutom att tillhandahålla begagnade varor av hög kvalitet, erbjuder Loopstyle också en plattform för säljare att enkelt publicera och sälja begagnade föremål. Vår vision är att främja grön konsumtionskultur genom återvinning och andrahandsaffärer och att skapa ett miljövänligt, fashionabelt och nordiskt samhälle.",
        ourArchive: "Vår Arkiv",
        archive: "Varje föremål i vårt arkiv berättar en historia om hantverk och omsorg, som förkroppsligar grundprinciperna för skandinavisk design – enkelhet, funktionalitet och elegans. Från kläder till möbler representerar vårt arkiv den bestående charmen av begagnade varor som är omsorgsfullt bevarade och hyllade. Kombinera estetisk grace med hållbart boende, allt samtidigt som du bidrar till en grönare, mer medveten framtid.",
        // sign in / register form
        signIn: "LOGGA IN",
        creating: "SKAPA",
        email: "E-post",
        password: "Lösenord",
        firstName: "Förnamn",
        lastName: "Efternamn",
        forgotPassword: "Glömt ditt lösenord?",
        // sell
        listyouritem: "Lista dina föremål",
        itemphotos: "Objekt foton",
        title: "Titel",
        category: "Kategori",
        top: "Toppar",
        pants: "Byxor",
        accessories: "Accessoarer",
        brand: "Stämpla",
        condition: "Skick",
        tags: "Ny med taggar",
        likenew: "Som ny",
        size: "Storlek",
        good: "Bra",
        sellprice: "Pris",
        saveasdraft: "Spara som Utkast",
        listitem: "Listobjekt",
        // main content
        videoCaption: "Upptäck tidlösa föremål med hantverkskänsla, perfekt utformade för ljusare, varmare dagar.",
        shopNow: "HANDLA NU",
        viewMore: "VISA MER",
        newarrivalsforWomen: "Nyheter för Dam",
        womenCollection: "Ta inspiration inför kommande säsong med våra nya damer. Varje del är gjord med LOOPSTYLE designetos i åtanke, med fokus på hållbara tyger, moderna snitt och tidlösa färger. Uppdatera din garderob med vår senaste kollektion, designad för att ge elegans och mångsidighet till din vardagliga stil.",
        newarrivalsforMen: "Nyheter för Herr",
        menCollection: "Lyft din stil för kommande säsong med vår senaste kollektion av herrkläder. Upptäck tidlösa plagg som sömlöst övergår från dag till natt, vilket säkerställer att du förblir skarp i varje miljö.",
        newarrivalkids: "Nyheter för Barn",
        kidscollection: "Inspirera till lekfulla äventyr och mysiga stunder med vår senaste kollektion av barnkläder. Våra nya produkter är gjorda för att ge komfort, glädje och en touch av charm till din lillas garderob, från vardagliga saker till kläder för speciella tillfällen.",
        home: "Hem",
        homes: "Omdefiniera dina vardagsrum med vår senaste kollektion av miljömedvetna möbler. Designad med planeten i åtanke, varje pjäs är tillverkad av ansvarsfulla, förnybara material, som blandar modern estetik med tidlös funktionalitet.",
        // cart
        orderSummary: "Order Summa",
        checkout: "Förtsätt till kassan",
        delivery: "Leverans",
        price: "Order Pris",
        total: "Total",
        receipt: "Kvitto",
        tax: "Beräknad skatt",
        date: "Order Datum: 02-14-2025",
        thanks: "Tack för att du gör ett grönare val!",
        receive: "Vi har tagit emot din snygga order",
        confirm: "Du kommer att få en bekräftelsemail snart",
        // footer
        sweden: "Sverige",
        sustainability: "Hållbarhet",
        contact: "Kontakt",
        faqs: "Vanliga frågor",
        delivery: "Leverans",
        payment: "Betalning",
        privacyPolicy: "Integritetspolicy",
        cookieSettings: "Cookie-inställningar",
        aboutUs: "Om oss",
        careers: "Karriärer",
        studentDiscount: "Studentrabatt",
        ourBlog: "Vår blogg",
        press: "Press",
        subscribeTitle: "Få 15% rabatt på din första order",
        subscribeButton: "PRENUMERERA",
        subscribeSuccess: "Tack för att du prenumererar!",
        subscribeMessage: "Vi har skickat ett bekräftelsemejl till dig.",
    }
};

document.addEventListener("DOMContentLoaded", () => {
    // language switching logic
    let currentLanguage = localStorage.getItem('language') || 'en'; // dafault english

    // translate the funciton
    function translatePage(lang) {
        const elements = document.querySelectorAll('[data-i18n]');
        elements.forEach(element => {
            const key = element.getAttribute('data-i18n');
            if (translations[lang] && translations[lang][key]) {
                element.textContent = translations[lang][key];
            }
        });

        // update placeholder text (such as the placeholder of an input box)
        document.getElementById('search-input').placeholder = translations[lang].search;

        // save the current language
        localStorage.setItem('language', lang);
    }

    // translate page on initial load
    translatePage(currentLanguage);

    // listen for click events on the "Sweden" link
    const swedenLink = document.querySelector('a[data-i18n="sweden"]');
    if (swedenLink) {
        swedenLink.addEventListener('click', (e) => {
            e.preventDefault(); // prevent default link redirection
            currentLanguage = currentLanguage === 'en' ? 'sv' : 'en'; // change the language
            translatePage(currentLanguage);
        });
    }

    // registration and login logic (keep the original code)
    const registerForm = document.getElementById("register-form");
    const registerMessage = document.getElementById("register");

    registerForm.addEventListener("submit", (e) => {
        e.preventDefault(); // Prevent form submission

        // Get the form data
        const firstName = document.getElementById('register-first-name').value.trim();
        const lastName = document.getElementById("register-last-name").value.trim();
        const email = document.getElementById("register-email").value.toLowerCase().trim(); // Convert to lowercase and remove spaces
        const password = document.getElementById("register-password").value.trim();

        // Save to local storage
        const userData = {
            fullName: `${firstName} ${lastName}`,
            email: email,
            password: password
        };

        localStorage.setItem("userData", JSON.stringify(userData));

        // Show success message
        registerMessage.textContent = translations[currentLanguage]["welcomeMessage"] || "Welcome to LOOPSTYLE!";

        // Clear the form
        registerForm.reset();
    });

    // Sign in form
    const loginForm = document.getElementById("login-form");
    const loginMessage = document.getElementById("login");

    loginForm.addEventListener("submit", (e) => {
        e.preventDefault(); // Prevent form submission

        // Get the form data
        const email = document.getElementById("login-email").value.toLowerCase().trim(); // Convert to lowercase and remove spaces
        const password = document.getElementById("login-password").value.trim();

        // Get the data from local storage
        const storedUserData = localStorage.getItem("userData");
        if (storedUserData) {
            const userData = JSON.parse(storedUserData);

            // Check if the email and password match
            if (userData.email === email && userData.password === password) {
                // Sign in success, redirect to the user page
                window.location.href = "account2.html";
            } else {
                loginMessage.textContent = translations[currentLanguage]["invalidLogin"] || "Invalid email or password";
                loginMessage.style.color = "red";
            }
        } else {
            loginMessage.textContent = translations[currentLanguage]["userNotFound"] || "User not found";
            loginMessage.style.color = "red";
        }

        // Clear the form
        loginForm.reset();
    });
});

// add missing keys for translations
translations.en.welcomeMessage = "Welcome to LOOPSTYLE!";
translations.en.invalidLogin = "Invalid email or password";
translations.en.userNotFound = "User not found";
translations.sv.welcomeMessage = "Välkommen till LOOPSTYLE!";
translations.sv.invalidLogin = "Ogiltig e-post eller lösenord";
translations.sv.userNotFound = "Användare hittades inte";